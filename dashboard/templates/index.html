<!DOCTYPE html>
<html>
<head>
    <title>æ”»å‡»æ€åŠ¿æ„ŸçŸ¥å¤§å±</title>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <meta http-equiv="refresh" content="3"> <style>
        body { font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif; background-color: #1e1e2f; color: #fff; padding: 20px; }
        .container { max-width: 900px; margin: 0 auto; }
        h1 { text-align: center; color: #00d4ff; }

        /* ç»Ÿè®¡å¡ç‰‡æ ·å¼ */
        .stats-row { display: flex; justify-content: space-between; margin-bottom: 30px; }
        .card { background: #27293d; padding: 20px; border-radius: 10px; width: 30%; text-align: center; box-shadow: 0 4px 6px rgba(0,0,0,0.3); }
        .number { font-size: 36px; font-weight: bold; margin-top: 10px; }
        .red { color: #ff3b3b; }   /* çº¢è‰²ä»£è¡¨æˆåŠŸå…¥ä¾µ */
        .green { color: #00f2c3; } /* ç»¿è‰²ä»£è¡¨è¢«æ‹¦æˆª/å¤±è´¥ */

        /* å›¾è¡¨å®¹å™¨ */
        .chart-container { background: #27293d; padding: 20px; border-radius: 10px; margin-bottom: 30px; }

        /* è¡¨æ ¼æ ·å¼ */
        table { width: 100%; border-collapse: collapse; background: #27293d; border-radius: 10px; overflow: hidden; }
        th, td { padding: 15px; text-align: left; border-bottom: 1px solid #3d3f54; }
        th { background-color: #34364a; color: #00d4ff; }
        .log-success { color: #ff3b3b; font-weight: bold; } /* æ”»å‡»æˆåŠŸæ˜¾ç¤ºçº¢è‰²è­¦å‘Š */
        .log-fail { color: #888; }
    </style>
</head>
<body>
    <div class="container">
        <h1>ğŸ›¡ï¸ å¯†ç åº”ç”¨æ¼æ´å¤ç°ä¸éªŒè¯ç³»ç»Ÿ</h1>

        <div class="stats-row">
            <div class="card">
                <div>æ€»æ”»å‡»æ¬¡æ•°</div>
                <div class="number">{{ total }}</div>
            </div>
            <div class="card">
                <div style="color:#ff3b3b">æ¼æ´åˆ©ç”¨æˆåŠŸ</div>
                <div class="number red">{{ success }}</div>
            </div>
            <div class="card">
                <div style="color:#00f2c3">å°è¯•å¤±è´¥</div>
                <div class="number green">{{ fail }}</div>
            </div>
        </div>

        <div class="chart-container">
            <canvas id="attackChart" style="max-height: 300px;"></canvas>
        </div>

        <h3>ğŸš€ å®æ—¶æ”»å‡»æ•°æ®æµ (Recent Logs)</h3>
        <table>
            <thead>
                <tr>
                    <th>æ”»å‡»ç±»å‹</th>
                    <th>Payload</th>
                    <th>ç»“æœ</th>
                </tr>
            </thead>
            <tbody>
                {% for log in logs %}
                <tr>
                    <td>{{ log[1] }}</td> <td>{{ log[2] }}</td> <td class="{{ 'log-success' if log[4] == 'success' else 'log-fail' }}">
                        {{ log[4].upper() }}
                    </td>
                </tr>
                {% endfor %}
            </tbody>
        </table>
    </div>

    <script>
        // é…ç½®é¥¼å›¾
        var ctx = document.getElementById('attackChart').getContext('2d');
        var myChart = new Chart(ctx, {
            type: 'doughnut',
            data: {
                labels: ['æ¼æ´åˆ©ç”¨æˆåŠŸ (Success)', 'æ”»å‡»å¤±è´¥ (Fail)'],
                datasets: [{
                    data: [{{ success }}, {{ fail }}],
                    backgroundColor: ['#ff3b3b', '#00f2c3'],
                    borderWidth: 0
                }]
            },
            options: { responsive: true, maintainAspectRatio: false }
        });
    </script>
</body>
</html>
